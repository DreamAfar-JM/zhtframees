<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0041)http://haohaoxuexi.iteye.com/blog/1812584 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站</title>
    <meta name="description" content="  SpringMVC介绍之Validation         对于任何一个应用而言在客户端做的数据有效性验证都不是安全有效的，这时候就要求我们在开发的时候在服务端也对 ...">
    <meta name="keywords" content="SpringMVC, Validation, Hibernate Validator, JSR-303, Validator SpringMVC介绍之Validation">
    <link rel="shortcut icon" href="http://haohaoxuexi.iteye.com/images/favicon.ico" type="image/x-icon">
    <link rel="search" type="application/opensearchdescription+xml" href="http://haohaoxuexi.iteye.com/open_search.xml" title="ITeye">
    <link href="http://haohaoxuexi.iteye.com/rss" rel="alternate" title="好好学习，天天向上" type="application/rss+xml">
    <link href="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/blog.css" media="screen" rel="stylesheet" type="text/css">
<link href="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/red.css" media="screen" rel="stylesheet" type="text/css">
    <script type="text/javascript" async="" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/ga.js"></script><script type="text/javascript" async="" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/ga.js"></script><script src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/application.js" type="text/javascript"></script><style type="text/css"></style>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-535605-1']);
  _gaq.push(['_setDomainName', 'iteye.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


      <link href="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/SyntaxHighlighter.css" media="screen" rel="stylesheet" type="text/css">
  <script src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/shCoreCommon.js" type="text/javascript"></script>
<script src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/hotkey.js" type="text/javascript"></script>
  <script src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/code_favorites.js" type="text/javascript"></script>
<script src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/weiboshare.js" type="text/javascript"></script>
  <style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-xml .cdata { color: #ff1493; }.dp-xml .tag, .dp-xml .tag-name { color: #069; font-weight: bold; }.dp-xml .attribute { color: red; }.dp-xml .attribute-value { color: blue; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-xml .cdata { color: #ff1493; }.dp-xml .tag, .dp-xml .tag-name { color: #069; font-weight: bold; }.dp-xml .attribute { color: red; }.dp-xml .attribute-value { color: blue; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style></head>
  <body>
    <div id="header">
      <div id="blog_site_nav">
  <a href="http://www.iteye.com/" class="homepage">首页</a>
  <a href="http://www.iteye.com/news">资讯</a>
  <a href="http://www.iteye.com/magazines">精华</a>
  <a href="http://www.iteye.com/forums">论坛</a>
  <a href="http://www.iteye.com/ask">问答</a>
  <a href="http://www.iteye.com/blogs">博客</a>
  <a href="http://www.iteye.com/blogs/subjects">专栏</a>
  <a href="http://www.iteye.com/groups">群组</a>
  <a href="http://haohaoxuexi.iteye.com/blog/1812584#" onclick="return false;" id="msna"><u>更多</u> <small>▼</small></a>
  <div class="quick_menu" style="display:none;">
    <a target="_blank" href="http://job.iteye.com/iteye">招聘</a>
    <a href="http://www.iteye.com/search">搜索</a>
  </div>
</div>

      <div id="user_nav">
      <a href="http://haohaoxuexi.iteye.com/login" class="welcome" title="登录">您还未登录 !</a>
    <a href="http://haohaoxuexi.iteye.com/login">登录</a>
    <a href="http://haohaoxuexi.iteye.com/signup" class="nobg">注册</a>
  </div>

    </div>

    <div id="page">
      <div id="branding" class="clearfix">
        <div id="blog_name">
          <h1><a href="http://haohaoxuexi.iteye.com/">好好学习，天天向上</a></h1>
        </div>
        <div id="fd"></div>
        <div id="blog_navbar">
          <ul>
            <li class="blog_navbar_for"><a href="http://haohaoxuexi.iteye.com/"><strong>博客</strong></a></li>
            <li><a href="http://haohaoxuexi.iteye.com/weibo">微博</a></li>
            <li><a href="http://haohaoxuexi.iteye.com/album">相册</a></li>
            <li><a href="http://haohaoxuexi.iteye.com/link">收藏</a></li>
            <li><a href="http://haohaoxuexi.iteye.com/blog/guest_book">留言</a></li>
            <li><a href="http://haohaoxuexi.iteye.com/blog/profile">关于我</a></li>
          </ul>
    
          <div class="search">
            <form action="http://haohaoxuexi.iteye.com/blog/search" method="get">
              <input class="search_text" id="query" name="query" style="margin-left: 10px;width: 110px;" type="text" value="">
              <input class="submit_search" type="submit" value="">
            </form>
          </div> 
          <div id="fd"></div>         
        </div>
      </div>
      
      <div id="content" class="clearfix">
        <div id="main">
          



          


<div class="h-entry" style="display:none">
  <a href="http://haohaoxuexi.iteye.com/" class="p-author" target="_blank">234390216</a>
</div>


<div class="blog_main">
  <div class="blog_title">
    <h3>
      <a href="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站.html">SpringMVC介绍之Validation</a>
      <em class="actions">      </em>
    </h3>
    <ul class="blog_categories"><strong>博客分类：</strong> <li><a href="http://haohaoxuexi.iteye.com/category/175984">SpringMVC</a></li> </ul>
        <div class="news_tag"><a href="http://www.iteye.com/blogs/tag/SpringMVC">SpringMVC</a><a href="http://www.iteye.com/blogs/tag/Validation">Validation</a><a href="http://www.iteye.com/blogs/tag/Hibernate%20Validator">Hibernate Validator</a><a href="http://www.iteye.com/blogs/tag/JSR-303">JSR-303</a><a href="http://www.iteye.com/blogs/tag/Validator">Validator</a>&nbsp;</div>
  </div>

  <div id="blog_content" class="blog_content">
    <div class="iteye-blog-content-contain" style="font-size: 14px;">
<p class="MsoNormal" style="text-align: center;"><strong><span style="font-size: 22.0pt; font-family: 宋体;">SpringMVC介绍之Validation</span></strong><strong><span style="font-size: 22.0pt; font-family: 宋体;"><br></span></strong></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">对于任何一个应用而言在客户端做的数据有效性验证都不是安全有效的，这时候就要求我们在开发的时候在服务端也对数据的有效性进行验证。</span><span>SpringMVC</span><span style="font-family: 宋体;">自身对数据在服务端的校验有一个比较好的支持，它能将我们提交到服务端的数据按照我们事先的约定进行数据有效性验证，对于不合格的数据信息</span><span>SpringMVC</span><span style="font-family: 宋体;">会把它保存在错误对象中，这些错误信息我们也可以通过</span><span>SpringMVC</span><span style="font-family: 宋体;">提供的标签在前端</span><span>JSP</span><span style="font-family: 宋体;">页面上进行展示。</span></p>
<h2>
<span style="font-family: 宋体;">使用</span><span>Validator</span><span style="font-family: 宋体;">接口进行验证</span>
</h2>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">在</span><span>SpringMVC</span><span style="font-family: 宋体;">中提供了一个</span><span>Validator</span><span style="font-family: 宋体;">接口，我们可以通过该接口来定义我们自己对实体对象的验证。接下来看一个示例。</span></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">假设我们现在有一个需要进行验证的实体类</span><span>User</span><span style="font-family: 宋体;">，其代码如下所示：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20User%20%7B%0A%20%0A%20%20%20%20private%20String%20username%3B%0A%20%20%20%0A%20%20%20%20private%20String%20password%3B%0A%20%0A%20%20%20%20public%20String%20getUsername()%20%7B%0A%20%20%20%20%20%20%20return%20username%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20setUsername(String%20username)%20%7B%0A%20%20%20%20%20%20%20this.username%20%3D%20username%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20String%20getPassword()%20%7B%0A%20%20%20%20%20%20%20return%20password%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20setPassword(String%20password)%20%7B%0A%20%20%20%20%20%20%20this.password%20%3D%20password%3B%0A%20%20%20%20%7D%0A%20%20%20%0A%20%20%20%20public%20String%20toString()%20%7B%0A%20%20%20%20%20%20%20return%20username%20%2B%20%22%2C%20%22%20%2B%20password%3B%0A%20%20%20%20%7D%0A%20%20%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;User&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;String&nbsp;username;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;String&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;getUsername()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;username;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setUsername(String&nbsp;username)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.username&nbsp;=&nbsp;username;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;getPassword()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setPassword(String&nbsp;password)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.password&nbsp;=&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;toString()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;username&nbsp;+&nbsp;</span><span class="string">",&nbsp;"</span><span>&nbsp;+&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="0" title="SpringMVC介绍之Validation" style="display: none;">public class User {
 
    private String username;
   
    private String password;
 
    public String getUsername() {
       return username;
    }
 
    public void setUsername(String username) {
       this.username = username;
    }
 
    public String getPassword() {
       return password;
    }
 
    public void setPassword(String password) {
       this.password = password;
    }
   
    public String toString() {
       return username + ", " + password;
    }
   
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">那么当我们需要使用</span><span>SpringMVC</span><span style="font-family: 宋体;">提供的</span><span>Validator</span><span style="font-family: 宋体;">接口来对该实体类进行校验的时候该如何做呢？这个时候我们应该提供一个</span><span>Validator</span><span style="font-family: 宋体;">的实现类，并实现</span><span>Validator</span><span style="font-family: 宋体;">接口的</span><span>supports</span><span style="font-family: 宋体;">方法和</span><span>validate</span><span style="font-family: 宋体;">方法。</span><span>Supports</span><span style="font-family: 宋体;">方法用于判断当前的</span><span>Validator</span><span style="font-family: 宋体;">实现类是否支持校验当前需要校验的实体类，只有当</span><span>supports</span><span style="font-family: 宋体;">方法的返回结果为</span><span>true</span><span style="font-family: 宋体;">的时候，该</span><span>Validator</span><span style="font-family: 宋体;">接口实现类的</span><span>validate</span><span style="font-family: 宋体;">方法才会被调用来对当前需要校验的实体类进行校验。这里假设我们需要验证</span><span>User</span><span style="font-family: 宋体;">类的</span><span>username</span><span style="font-family: 宋体;">和</span><span>password</span><span style="font-family: 宋体;">都不能为空，先给出其代码，稍后再进行解释。这里我们定义一个</span><span>UserValidator</span><span style="font-family: 宋体;">，其代码如下：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=import%20org.springframework.validation.Errors%3B%0Aimport%20org.springframework.validation.ValidationUtils%3B%0Aimport%20org.springframework.validation.Validator%3B%0A%20%0Apublic%20class%20UserValidator%20implements%20Validator%20%7B%0A%20%0A%20%20%20%20public%20boolean%20supports(Class%3C%3F%3E%20clazz)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%20return%20User.class.equals(clazz)%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20validate(Object%20obj%2C%20Errors%20errors)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%20ValidationUtils.rejectIfEmpty(errors%2C%20%22username%22%2C%20null%2C%20%22Username%20is%20empty.%22)%3B%0A%20%20%20%20%20%20%20User%20user%20%3D%20(User)%20obj%3B%0A%20%20%20%20%20%20%20if%20(null%20%3D%3D%20user.getPassword()%20%7C%7C%20%22%22.equals(user.getPassword()))%0A%20%20%20%20%20%20%20%20%20%20%20errors.rejectValue(%22password%22%2C%20null%2C%20%22Password%20is%20empty.%22)%3B%0A%20%20%20%20%7D%0A%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.validation.Errors;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.validation.ValidationUtils;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.validation.Validator;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;UserValidator&nbsp;</span><span class="keyword">implements</span><span>&nbsp;Validator&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">boolean</span><span>&nbsp;supports(Class&lt;?&gt;&nbsp;clazz)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;User.</span><span class="keyword">class</span><span>.equals(clazz);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;validate(Object&nbsp;obj,&nbsp;Errors&nbsp;errors)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValidationUtils.rejectIfEmpty(errors,&nbsp;<span class="string">"username"</span><span>,&nbsp;</span><span class="keyword">null</span><span>,&nbsp;</span><span class="string">"Username&nbsp;is&nbsp;empty."</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User&nbsp;user&nbsp;=&nbsp;(User)&nbsp;obj;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(</span><span class="keyword">null</span><span>&nbsp;==&nbsp;user.getPassword()&nbsp;||&nbsp;</span><span class="string">""</span><span>.equals(user.getPassword()))&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errors.rejectValue(<span class="string">"password"</span><span>,&nbsp;</span><span class="keyword">null</span><span>,&nbsp;</span><span class="string">"Password&nbsp;is&nbsp;empty."</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="1" title="SpringMVC介绍之Validation" style="display: none;">import org.springframework.validation.Errors;
import org.springframework.validation.ValidationUtils;
import org.springframework.validation.Validator;
 
public class UserValidator implements Validator {
 
    public boolean supports(Class&lt;?&gt; clazz) {
       // TODO Auto-generated method stub
       return User.class.equals(clazz);
    }
 
    public void validate(Object obj, Errors errors) {
       // TODO Auto-generated method stub
       ValidationUtils.rejectIfEmpty(errors, "username", null, "Username is empty.");
       User user = (User) obj;
       if (null == user.getPassword() || "".equals(user.getPassword()))
           errors.rejectValue("password", null, "Password is empty.");
    }
 
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">在上述代码中我们在</span><span>supports</span><span style="font-family: 宋体;">方法中定义了该</span><span>UserValidator</span><span style="font-family: 宋体;">只支持对</span><span>User</span><span style="font-family: 宋体;">对象进行校验。在</span><span>validate</span><span style="font-family: 宋体;">方法中我们校验了</span><span>User</span><span style="font-family: 宋体;">对象的</span><span>username</span><span style="font-family: 宋体;">和</span><span>password</span><span style="font-family: 宋体;">不为</span><span>empty</span><span style="font-family: 宋体;">的情况，这里的</span><span>empty</span><span style="font-family: 宋体;">包括</span><span>null</span><span style="font-family: 宋体;">和空字符串两种情况。</span><span>ValidationUtils</span><span style="font-family: 宋体;">类是</span><span>Spring</span><span style="font-family: 宋体;">中提供的一个工具类。</span><span>Errors</span><span style="font-family: 宋体;">就是</span><span>Spring</span><span style="font-family: 宋体;">用来存放错误信息的对象。</span></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">我们已经定义了一个对</span><span>User</span><span style="font-family: 宋体;">类进行校验的</span><span>UserValidator</span><span style="font-family: 宋体;">了，但是这个时候</span><span>UserValidator</span><span style="font-family: 宋体;">还不能对</span><span>User</span><span style="font-family: 宋体;">对象进行校验，因为我们还没有告诉</span><span>Spring</span><span style="font-family: 宋体;">应该使用</span><span>UserValidator</span><span style="font-family: 宋体;">来校验</span><span>User</span><span style="font-family: 宋体;">对象。在</span><span>SpringMVC</span><span style="font-family: 宋体;">中我们可以使用</span><span>DataBinder</span><span style="font-family: 宋体;">来设定当前</span><span>Controller</span><span style="font-family: 宋体;">需要使用的</span><span>Validator</span><span style="font-family: 宋体;">。先来看下面一段代码：</span></p>
<p class="MsoNormal"><span style="font-size: 10.0pt; font-family: &#39;Courier New&#39;;">&nbsp;</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=import%20javax.validation.Valid%3B%0Aimport%20org.springframework.stereotype.Controller%3B%0Aimport%20org.springframework.validation.BindingResult%3B%0Aimport%20org.springframework.validation.DataBinder%3B%0Aimport%20org.springframework.web.bind.annotation.InitBinder%3B%0Aimport%20org.springframework.web.bind.annotation.RequestMapping%3B%0A%20%0A%40Controller%0Apublic%20class%20UserController%20%7B%0A%20%20%20%0A%20%20%20%20%40InitBinder%0A%20%20%20%20public%20void%20initBinder(DataBinder%20binder)%20%7B%0A%20%20%20%20%20%20%20binder.setValidator(new%20UserValidator())%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20%40RequestMapping(%22login%22)%0A%20%20%20%20public%20String%20login(%40Valid%20User%20user%2C%20BindingResult%20result)%20%7B%0A%20%20%20%20%20%20%20if%20(result.hasErrors())%0A%20%20%20%20%20%20%20%20%20%20%20return%20%22redirect%3Auser%2Flogin%22%3B%0A%20%20%20%20%20%20%20return%20%22redirect%3A%2F%22%3B%0A%20%20%20%20%7D%0A%20%20%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.Valid;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.stereotype.Controller;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.validation.BindingResult;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.validation.DataBinder;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.web.bind.annotation.InitBinder;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.web.bind.annotation.RequestMapping;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="annotation">@Controller</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;UserController&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@InitBinder</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;initBinder(DataBinder&nbsp;binder)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binder.setValidator(<span class="keyword">new</span><span>&nbsp;UserValidator());&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@RequestMapping</span><span>(</span><span class="string">"login"</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;login(</span><span class="annotation">@Valid</span><span>&nbsp;User&nbsp;user,&nbsp;BindingResult&nbsp;result)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(result.hasErrors())&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="string">"redirect:user/login"</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="string">"redirect:/"</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="2" title="SpringMVC介绍之Validation" style="display: none;">import javax.validation.Valid;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.validation.DataBinder;
import org.springframework.web.bind.annotation.InitBinder;
import org.springframework.web.bind.annotation.RequestMapping;
 
@Controller
public class UserController {
   
    @InitBinder
    public void initBinder(DataBinder binder) {
       binder.setValidator(new UserValidator());
    }
 
    @RequestMapping("login")
    public String login(@Valid User user, BindingResult result) {
       if (result.hasErrors())
           return "redirect:user/login";
       return "redirect:/";
    }
   
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">在上面这段代码中我们可以看到我们定义了一个</span><span>UserController</span><span style="font-family: 宋体;">，该</span><span>Controller</span><span style="font-family: 宋体;">有一个处理</span><span>login</span><span style="font-family: 宋体;">操作的处理器方法</span><span>login</span><span style="font-family: 宋体;">，它需要接收客户端发送的一个</span><span>User</span><span style="font-family: 宋体;">对象，我们就是要利用前面的</span><span>UserValidator</span><span style="font-family: 宋体;">对该</span><span>User</span><span style="font-family: 宋体;">对象进行校验。首先我们可以看到我们</span><span>login</span><span style="font-family: 宋体;">方法接收的参数</span><span>user</span><span style="font-family: 宋体;">是用</span><span>@Valid</span><span style="font-family: 宋体;">进行标注的，这里的</span><span>@Valid</span><span style="font-family: 宋体;">是定义在</span><span>JSR-303</span><span style="font-family: 宋体;">标准中的，我这里使用的是</span><span>Hibernate Validation</span><span style="font-family: 宋体;">对它的实现。这里我们<strong><span style="color: red;">必须使用</span></strong></span><strong><span style="color: red;">@Valid</span></strong><strong><span style="font-family: 宋体; color: red;">标注我们需要校验的参数</span></strong><span>user</span><span style="font-family: 宋体;">，否则</span><span>Spring</span><span style="font-family: 宋体;">不会对它进行校验。另外我们的<strong><span style="color: red;">处理器方法必须给定包含</span></strong></span><strong><span style="color: red;">Errors</span></strong><strong><span style="font-family: 宋体; color: red;">的参数</span></strong><span style="font-family: 宋体;">，这可以是</span><span>Errors</span><span style="font-family: 宋体;">本身，也可以是它的子类</span><span>BindingResult</span><span style="font-family: 宋体;">，使用了</span><span>Errors</span><span style="font-family: 宋体;">参数就是告诉</span><span>Spring</span><span style="font-family: 宋体;">关于表单对象数据校验的错误将由我们自己来处理，否则</span><span>Spring</span><span style="font-family: 宋体;">会直接抛出异常，<span style="color: #ff0000;"><strong>而且这个参数是必须紧挨着@Valid参数的，即必须紧挨着需要校验的参数，这就意味着我们有多少个@Valid参数就需要有多少个对应的Errors参数，它们是一一对应的</strong></span>。前面有提到我们可以通过</span><span>DataBinder</span><span style="font-family: 宋体;">来指定需要使用的</span><span>Validator</span><span style="font-family: 宋体;">，我们可以看到在上面代码中我们通过</span><span>@InitBinder</span><span style="font-family: 宋体;">标记的方法</span><span>initBinder</span><span style="font-family: 宋体;">设置了当前</span><span>Controller</span><span style="font-family: 宋体;">需要使用的</span><span>Validator</span><span style="font-family: 宋体;">是</span><span>UserValidator</span><span style="font-family: 宋体;">。这样当我们请求处理器方法</span><span>login</span><span style="font-family: 宋体;">时就会使用</span><span>DataBinder</span><span style="font-family: 宋体;">设定的</span><span>UserValidator</span><span style="font-family: 宋体;">来校验当前的表单对象</span><span>User</span><span style="font-family: 宋体;">，首先会通过</span><span>UserValidator</span><span style="font-family: 宋体;">的</span><span>supports</span><span style="font-family: 宋体;">方法判断其是否支持</span><span>User</span><span style="font-family: 宋体;">对象的校验，若支持则调用</span><span>UserValidator</span><span style="font-family: 宋体;">的</span><span>validate</span><span style="font-family: 宋体;">方法，并把相关的校验信息存放到当前的</span><span>Errors</span><span style="font-family: 宋体;">对象中。接着我们就可以在我们的处理器方法中根据是否有校验异常信息来做不同的操作。在上面代码中我们定义了在有异常信息的时候就跳转到登陆页面。这样我们就可以在登陆页面上通过</span><span>errors</span><span style="font-family: 宋体;">标签来展示这些错误信息了。</span></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">我们知道在</span><span>Controller</span><span style="font-family: 宋体;">类中通过</span><span>@InitBinder</span><span style="font-family: 宋体;">标记的方法只有在请求当前</span><span>Controller</span><span style="font-family: 宋体;">的时候才会被执行，所以其中定义的</span><span>Validator</span><span style="font-family: 宋体;">也只能在当前</span><span>Controller</span><span style="font-family: 宋体;">中使用，如果我们希望一个</span><span>Validator</span><span style="font-family: 宋体;">对所有的</span><span>Controller</span><span style="font-family: 宋体;">都起作用的话，我们可以通过</span><span>WebBindingInitializer</span><span style="font-family: 宋体;">的</span><span>initBinder</span><span style="font-family: 宋体;">方法来设定了。另外，在</span><span>SpringMVC</span><span style="font-family: 宋体;">的配置文件中通过</span><span>mvc:annotation-driven</span><span style="font-family: 宋体;">的</span><span>validator</span><span style="font-family: 宋体;">属性也可以指定全局的</span><span>Validator</span><span style="font-family: 宋体;">。代码如下所示：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Xml代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%22%0A%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%20xmlns%3Acontext%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%22%0A%20%20%20%20xmlns%3Amvc%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fmvc%22%0A%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%2Fspring-beans-3.0.xsd%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%2Fspring-context-3.0.xsd%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fmvc%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fmvc%2Fspring-mvc-3.0.xsd%22%3E%0A%20%20%20%20%0A%20%20%20%20%3Cmvc%3Aannotation-driven%20validator%3D%22userValidator%22%2F%3E%0A%20%20%20%0A%20%20%20%20%3Cbean%20id%3D%22userValidator%22%20class%3D%22com.xxx.xxx.UserValidator%22%2F%3E%0A%20%0A%20%20%20%20...%0A%3C%2Fbeans%3E" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-xml"><li><span><span class="tag">&lt;?</span><span class="tag-name">xml</span><span>&nbsp;</span><span class="attribute">version</span><span>=</span><span class="attribute-value">"1.0"</span><span>&nbsp;</span><span class="attribute">encoding</span><span>=</span><span class="attribute-value">"UTF-8"</span><span class="tag">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="tag">&lt;</span><span class="tag-name">beans</span><span>&nbsp;</span><span class="attribute">xmlns</span><span>=</span><span class="attribute-value">"http://www.springframework.org/schema/beans"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xmlns:xsi</span><span>=</span><span class="attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span>&nbsp;</span><span class="attribute">xmlns:context</span><span>=</span><span class="attribute-value">"http://www.springframework.org/schema/context"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xmlns:mvc</span><span>=</span><span class="attribute-value">"http://www.springframework.org/schema/mvc"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xsi:schemaLocation</span><span>="http://www.springframework.org/schema/beans&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context/spring-context-3.0.xsd&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"<span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">mvc:annotation-driven</span><span>&nbsp;</span><span class="attribute">validator</span><span>=</span><span class="attribute-value">"userValidator"</span><span class="tag">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">bean</span><span>&nbsp;</span><span class="attribute">id</span><span>=</span><span class="attribute-value">"userValidator"</span><span>&nbsp;</span><span class="attribute">class</span><span>=</span><span class="attribute-value">"com.xxx.xxx.UserValidator"</span><span class="tag">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;</span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">beans</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre class="xml" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="3" title="SpringMVC介绍之Validation" style="display: none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd
     http://www.springframework.org/schema/mvc
     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"&gt;
    
    &lt;mvc:annotation-driven validator="userValidator"/&gt;
   
    &lt;bean id="userValidator" class="com.xxx.xxx.UserValidator"/&gt;
 
    ...
&lt;/beans&gt;</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<h2>
<span style="font-family: 宋体;">使用</span><span>JSR-303 Validation</span><span style="font-family: 宋体;">进行验证</span>
</h2>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JSR-303</span><span style="font-family: 宋体;">是一个数据验证的规范，这里我不会讲这个规范是怎么回事，只会讲一下</span><span>JSR-303</span><span style="font-family: 宋体;">在</span><span>SpringMVC</span><span style="font-family: 宋体;">中的应用。</span><span>JSR-303</span><span style="font-family: 宋体;">只是一个规范，而</span><span>Spring</span><span style="font-family: 宋体;">也没有对这一规范进行实现，那么当我们在</span><span>SpringMVC</span><span style="font-family: 宋体;">中需要使用到</span><span>JSR-303</span><span style="font-family: 宋体;">的时候就需要我们提供一个对</span><span>JSR-303</span><span style="font-family: 宋体;">规范的实现，</span><span>Hibernate Validator</span><span style="font-family: 宋体;">是实现了这一规范的，这里我将以它作为</span><span>JSR-303</span><span style="font-family: 宋体;">的实现来讲解</span><span>SpringMVC</span><span style="font-family: 宋体;">对</span><span>JSR-303</span><span style="font-family: 宋体;">的支持。</span></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JSR-303</span><span style="font-family: 宋体;">的校验是基于注解的，它内部已经定义好了一系列的限制注解，我们只需要把这些注解标记在需要验证的实体类的属性上或是其对应的</span><span>get</span><span style="font-family: 宋体;">方法上。来看以下一个需要验证的实体类</span><span>User</span><span style="font-family: 宋体;">的代码：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%20%0Aimport%20javax.validation.constraints.Min%3B%0Aimport%20javax.validation.constraints.NotNull%3B%0Aimport%20org.hibernate.validator.constraints.NotBlank%3B%0A%20%0Apublic%20class%20User%20%7B%0A%20%0A%20%20%20%20private%20String%20username%3B%0A%20%20%20%0A%20%20%20%20private%20String%20password%3B%0A%20%20%20%0A%20%20%20%20private%20int%20age%3B%0A%20%0A%20%20%20%20%40NotBlank(message%3D%22%E7%94%A8%E6%88%B7%E5%90%8D%E4%B8%8D%E8%83%BD%E4%B8%BA%E7%A9%BA%22)%0A%20%20%20%20public%20String%20getUsername()%20%7B%0A%20%20%20%20%20%20%20return%20username%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20setUsername(String%20username)%20%7B%0A%20%20%20%20%20%20%20this.username%20%3D%20username%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20%40NotNull(message%3D%22%E5%AF%86%E7%A0%81%E4%B8%8D%E8%83%BD%E4%B8%BAnull%22)%0A%20%20%20%20public%20String%20getPassword()%20%7B%0A%20%20%20%20%20%20%20return%20password%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20setPassword(String%20password)%20%7B%0A%20%20%20%20%20%20%20this.password%20%3D%20password%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20%40Min(value%3D10%2C%20message%3D%22%E5%B9%B4%E9%BE%84%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC%E4%B8%BA10%22)%0A%20%20%20%20public%20int%20getAge()%20%7B%0A%20%20%20%20%20%20%20return%20age%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20setAge(int%20age)%20%7B%0A%20%20%20%20%20%20%20this.age%20%3D%20age%3B%0A%20%20%20%20%7D%0A%20%20%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.constraints.Min;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.constraints.NotNull;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.hibernate.validator.constraints.NotBlank;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;User&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;String&nbsp;username;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;String&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="keyword">int</span><span>&nbsp;age;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@NotBlank</span><span>(message=</span><span class="string">"用户名不能为空"</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;getUsername()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;username;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setUsername(String&nbsp;username)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.username&nbsp;=&nbsp;username;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@NotNull</span><span>(message=</span><span class="string">"密码不能为null"</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;getPassword()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setPassword(String&nbsp;password)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.password&nbsp;=&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Min</span><span>(value=</span><span class="number">10</span><span>,&nbsp;message=</span><span class="string">"年龄的最小值为10"</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">int</span><span>&nbsp;getAge()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;age;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setAge(</span><span class="keyword">int</span><span>&nbsp;age)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.age&nbsp;=&nbsp;age;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="4" title="SpringMVC介绍之Validation" style="display: none;"> 
import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;
import org.hibernate.validator.constraints.NotBlank;
 
public class User {
 
    private String username;
   
    private String password;
   
    private int age;
 
    @NotBlank(message="用户名不能为空")
    public String getUsername() {
       return username;
    }
 
    public void setUsername(String username) {
       this.username = username;
    }
 
    @NotNull(message="密码不能为null")
    public String getPassword() {
       return password;
    }
 
    public void setPassword(String password) {
       this.password = password;
    }
 
    @Min(value=10, message="年龄的最小值为10")
    public int getAge() {
       return age;
    }
 
    public void setAge(int age) {
       this.age = age;
    }
   
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">我们可以看到我们在</span><span>username</span><span style="font-family: 宋体;">、</span><span>password</span><span style="font-family: 宋体;">和</span><span>age</span><span style="font-family: 宋体;">对应的</span><span>get</span><span style="font-family: 宋体;">方法上都加上了一个注解，这些注解就是</span><span>JSR-303</span><span style="font-family: 宋体;">里面定义的限制，其中</span><span>@NotBlank</span><span style="font-family: 宋体;">是</span><span>Hibernate Validator</span><span style="font-family: 宋体;">的扩展。不难发现，使用</span><span>JSR-303</span><span style="font-family: 宋体;">来进行校验比使用</span><span>Spring</span><span style="font-family: 宋体;">提供的</span><span>Validator</span><span style="font-family: 宋体;">接口要简单的多。我们知道注解只是起到一个标记性的作用，它是不会直接影响到代码的运行的，它需要被某些类识别到才能起到限制作用。使用</span><span>SpringMVC</span><span style="font-family: 宋体;">的时候我们只需要把</span><span>JSR-303</span><span style="font-family: 宋体;">的实现者对应的</span><span>jar</span><span style="font-family: 宋体;">包放到</span><span>classpath</span><span style="font-family: 宋体;">中，然后在</span><span>SpringMVC</span><span style="font-family: 宋体;">的配置文件中引入</span><span>MVC Namespace</span><span style="font-family: 宋体;">，并加上</span><span>&lt;mvn:annotation-driven/&gt;</span><span style="font-family: 宋体;">就可以非常方便的使用</span><span>JSR-303</span><span style="font-family: 宋体;">来进行实体对象的验证。加上了</span><span>&lt;mvn:annotation-driven/&gt;</span><span style="font-family: 宋体;">之后</span><span>Spring</span><span style="font-family: 宋体;">会自动检测</span><span>classpath</span><span style="font-family: 宋体;">下的</span><span>JSR-303</span><span style="font-family: 宋体;">提供者并自动启用对</span><span>JSR-303</span><span style="font-family: 宋体;">的支持，把对应的校验错误信息放到</span><span>Spring</span><span style="font-family: 宋体;">的</span><span>Errors</span><span style="font-family: 宋体;">对象中。这时候</span><span>SpringMVC</span><span style="font-family: 宋体;">的配置文件如下所示：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Xml代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%22%0A%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%20xmlns%3Acontext%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%22%0A%20%20%20%20xmlns%3Amvc%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fmvc%22%0A%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%2Fspring-beans-3.0.xsd%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%2Fspring-context-3.0.xsd%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fmvc%0A%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fmvc%2Fspring-mvc-3.0.xsd%22%3E%0A%20%20%20%20%0A%20%20%20%20%3Cmvc%3Aannotation-driven%2F%3E%0A%3C%2Fbeans%3E" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-xml"><li><span><span class="tag">&lt;?</span><span class="tag-name">xml</span><span>&nbsp;</span><span class="attribute">version</span><span>=</span><span class="attribute-value">"1.0"</span><span>&nbsp;</span><span class="attribute">encoding</span><span>=</span><span class="attribute-value">"UTF-8"</span><span class="tag">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="tag">&lt;</span><span class="tag-name">beans</span><span>&nbsp;</span><span class="attribute">xmlns</span><span>=</span><span class="attribute-value">"http://www.springframework.org/schema/beans"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xmlns:xsi</span><span>=</span><span class="attribute-value">"http://www.w3.org/2001/XMLSchema-instance"</span><span>&nbsp;</span><span class="attribute">xmlns:context</span><span>=</span><span class="attribute-value">"http://www.springframework.org/schema/context"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xmlns:mvc</span><span>=</span><span class="attribute-value">"http://www.springframework.org/schema/mvc"</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="attribute">xsi:schemaLocation</span><span>="http://www.springframework.org/schema/beans&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context/spring-context-3.0.xsd&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"<span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tag">&lt;</span><span class="tag-name">mvc:annotation-driven</span><span class="tag">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">beans</span><span class="tag">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre class="xml" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="5" title="SpringMVC介绍之Validation" style="display: none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd
     http://www.springframework.org/schema/mvc
     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"&gt;
    
    &lt;mvc:annotation-driven/&gt;
&lt;/beans&gt;</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">接着我们来定义一个使用</span><span>User</span><span style="font-family: 宋体;">对象作为参数接收者的</span><span>Controller</span><span style="font-family: 宋体;">，其代码如下所示：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=import%20javax.validation.Valid%3B%0Aimport%20org.springframework.stereotype.Controller%3B%0Aimport%20org.springframework.validation.BindingResult%3B%0Aimport%20org.springframework.web.bind.annotation.RequestMapping%3B%0A%20%0A%40Controller%0Apublic%20class%20UserController%20%7B%0A%20%0A%20%20%20%20%40RequestMapping(%22login%22)%0A%20%20%20%20public%20String%20login(%40Valid%20User%20user%2C%20BindingResult%20result)%20%7B%0A%20%20%20%20%20%20%20if%20(result.hasErrors())%0A%20%20%20%20%20%20%20%20%20%20%20return%20%22user%2Flogin%22%3B%0A%20%20%20%20%20%20%20return%20%22redirect%3A%2F%22%3B%0A%20%20%20%20%7D%0A%20%20%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.Valid;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.stereotype.Controller;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.validation.BindingResult;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;org.springframework.web.bind.annotation.RequestMapping;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="annotation">@Controller</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;UserController&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@RequestMapping</span><span>(</span><span class="string">"login"</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;String&nbsp;login(</span><span class="annotation">@Valid</span><span>&nbsp;User&nbsp;user,&nbsp;BindingResult&nbsp;result)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(result.hasErrors())&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="string">"user/login"</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="string">"redirect:/"</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="6" title="SpringMVC介绍之Validation" style="display: none;">import javax.validation.Valid;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.RequestMapping;
 
@Controller
public class UserController {
 
    @RequestMapping("login")
    public String login(@Valid User user, BindingResult result) {
       if (result.hasErrors())
           return "user/login";
       return "redirect:/";
    }
   
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">这样当我们不带任何参数请求</span><span>login.do</span><span style="font-family: 宋体;">的时候就不能通过实体对象</span><span>User</span><span style="font-family: 宋体;">的属性数据有效性限制，然后会把对应的错误信息放置在当前的</span><span>Errors</span><span style="font-family: 宋体;">对象中。</span></p>
<p class="MsoNormal"><span>&nbsp;</span></p>
<p class="MsoNormal"><strong><span>JSR-303</span></strong><strong><span style="font-family: 宋体;">原生支持的限制有如下几种</span></strong><span style="font-family: 宋体;">：</span></p>
<table class="MsoTableLightShadingAccent1" style="border-collapse: collapse; border: none;" cellpadding="0" cellspacing="0" border="1">
<tbody><tr>
<td style="width: 213.05pt; border-left: none; border-right: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal" style="text-align: center;"><strong><span style="font-family: 宋体; color: #365f91;">限制</span></strong></p>
</td>
<td style="width: 213.05pt; border-left: none; border-right: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal" style="text-align: center;"><strong><span style="font-family: 宋体; color: #365f91;">说明</span></strong></p>
</td>
</tr>
<tr style="background-color: #ccffcc;">
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="background-color: #ccffcc;"><strong><span style="color: #365f91;">@Null</span></strong></span></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="background-color: #ccffcc;"><span style="font-family: 宋体; color: #365f91;">限制只能为</span><span style="color: #365f91;">null</span></span></p>
</td>
</tr>
<tr>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@NotNull</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须不为</span><span style="color: #365f91;">null</span></p>
</td>
</tr>
<tr style="background-color: #ccffcc;">
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="background-color: #ccffcc;"><strong><span style="color: #365f91;">@AssertFalse</span></strong></span></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="background-color: #ccffcc;"><span style="font-family: 宋体; color: #365f91;">限制必须为</span><span style="color: #365f91;">false</span></span></p>
</td>
</tr>
<tr>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@AssertTrue</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须为</span><span style="color: #365f91;">true</span></p>
</td>
</tr>
<tr style="background-color: #ccffcc;">
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="background-color: #ccffcc;"><strong><span style="color: #365f91;">@DecimalMax(value)</span></strong></span></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91; background-color: #ccffcc;">限制必须为一个不大于指定值的数字</span></p>
</td>
</tr>
<tr>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@DecimalMin(value)</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须为一个不小于指定值的数字</span></p>
</td>
</tr>
<tr style="background-color: #ccffcc;">
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="background-color: #ccffcc;"><strong><span style="color: #365f91;">@Digits(integer,fraction)</span></strong></span></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="background-color: #ccffcc;"><span style="font-family: 宋体; color: #365f91;">限制必须为一个小数，且整数部分的位数不能超过</span><span style="color: #365f91;">integer</span><span style="font-family: 宋体; color: #365f91;">，小数部分的位数不能超过</span><span style="color: #365f91;">fraction</span></span></p>
</td>
</tr>
<tr>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@Future</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须是一个将来的日期</span></p>
</td>
</tr>
<tr style="background-color: #ccffcc;">
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@Max(value)</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须为一个不大于指定值的数字</span></p>
</td>
</tr>
<tr>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@Min(value)</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须为一个不小于指定值的数字</span></p>
</td>
</tr>
<tr style="background-color: #ccffcc;">
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@Past</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须是一个过去的日期</span></p>
</td>
</tr>
<tr>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@Pattern(value)</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制必须符合指定的正则表达式</span></p>
</td>
</tr>
<tr style="background-color: #ccffcc;">
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><strong><span style="color: #365f91;">@Size(max,min)</span></strong></p>
</td>
<td style="width: 213.05pt; border: none; padding: 0cm 5.4pt 0cm 5.4pt;" width="284">
<p class="MsoNormal"><span style="font-family: 宋体; color: #365f91;">限制字符长度必须在</span><span style="color: #365f91;">min</span><span style="font-family: 宋体; color: #365f91;">到</span><span style="color: #365f91;">max</span><span style="font-family: 宋体; color: #365f91;">之间</span></p>
</td>
</tr>
</tbody></table>
<p class="MsoNormal"><span>&nbsp;</span></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">除了</span><span>JSR-303</span><span style="font-family: 宋体;">原生支持的限制类型之外我们还可以定义自己的限制类型。定义自己的限制类型首先我们得定义一个该种限制类型的注解，而且该注解需要使用</span><span>@Constraint</span><span style="font-family: 宋体;">标注。现在假设我们需要定义一个表示金额的限制类型，那么我们可以这样定义：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%20%0Aimport%20java.lang.annotation.ElementType%3B%0Aimport%20java.lang.annotation.Retention%3B%0Aimport%20java.lang.annotation.RetentionPolicy%3B%0Aimport%20java.lang.annotation.Target%3B%0A%20%0Aimport%20javax.validation.Constraint%3B%0Aimport%20javax.validation.Payload%3B%0A%20%0Aimport%20com.xxx.xxx.constraint.impl.MoneyValidator%3B%0A%20%0A%40Target(%7BElementType.FIELD%2C%20ElementType.METHOD%7D)%0A%40Retention(RetentionPolicy.RUNTIME)%0A%40Constraint(validatedBy%3DMoneyValidator.class)%0Apublic%20%40interface%20Money%20%7B%0A%20%20%20%0A%20%20%20%20String%20message()%20default%22%E4%B8%8D%E6%98%AF%E9%87%91%E9%A2%9D%E5%BD%A2%E5%BC%8F%22%3B%0A%20%20%20%0A%20%20%20%20Class%3C%3F%3E%5B%5D%20groups()%20default%20%7B%7D%3B%0A%20%20%20%0A%20%20%20%20Class%3C%3F%20extends%20Payload%3E%5B%5D%20payload()%20default%20%7B%7D%3B%0A%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.lang.annotation.ElementType;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.lang.annotation.Retention;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.lang.annotation.RetentionPolicy;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.lang.annotation.Target;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.Constraint;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.Payload;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="keyword">import</span><span>&nbsp;com.xxx.xxx.constraint.impl.MoneyValidator;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="annotation">@Target</span><span>({ElementType.FIELD,&nbsp;ElementType.METHOD})&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@Retention</span><span>(RetentionPolicy.RUNTIME)&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@Constraint</span><span>(validatedBy=MoneyValidator.</span><span class="keyword">class</span><span>)&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">@interface</span><span>&nbsp;Money&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message()&nbsp;<span class="keyword">default</span><span class="string">"不是金额形式"</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&gt;[]&nbsp;groups()&nbsp;<span class="keyword">default</span><span>&nbsp;{};&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&nbsp;<span class="keyword">extends</span><span>&nbsp;Payload&gt;[]&nbsp;payload()&nbsp;</span><span class="keyword">default</span><span>&nbsp;{};&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="7" title="SpringMVC介绍之Validation" style="display: none;"> 
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
 
import javax.validation.Constraint;
import javax.validation.Payload;
 
import com.xxx.xxx.constraint.impl.MoneyValidator;
 
@Target({ElementType.FIELD, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy=MoneyValidator.class)
public @interface Money {
   
    String message() default"不是金额形式";
   
    Class&lt;?&gt;[] groups() default {};
   
    Class&lt;? extends Payload&gt;[] payload() default {};
 
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">我们可以看到在上面代码中我们定义了一个</span><span>Money</span><span style="font-family: 宋体;">注解，而且该注解上标注了</span><span>@Constraint</span><span style="font-family: 宋体;">注解，使用</span><span>@Constraint</span><span style="font-family: 宋体;">注解标注表明我们定义了一个用于限制的注解。</span><span>@Constraint</span><span style="font-family: 宋体;">注解的</span><span>validatedBy</span><span style="font-family: 宋体;">属性用于指定我们定义的当前限制类型需要被哪个</span><span>ConstraintValidator</span><span style="font-family: 宋体;">进行校验。在上面代码中我们指定了</span><span>Money</span><span style="font-family: 宋体;">限制类型的校验类是</span><span>MoneyValidator</span><span style="font-family: 宋体;">。<strong><span style="color: red;">另外需要注意的是我们在定义自己的限制类型的注解时有三个属性是必须定义的，如上面代码所示的</span></strong></span><strong><span style="font-size: 16.0pt; color: #ffc000;">message</span></strong><strong><span style="font-size: 16.0pt; font-family: 宋体; color: #ffc000;">、</span></strong><strong><span style="font-size: 16.0pt; color: #ffc000;">groups</span></strong><strong><span style="font-family: 宋体; color: red;">和</span></strong><strong><span style="font-size: 16.0pt; color: #ffc000;">payload</span></strong><strong><span style="font-family: 宋体; color: red;">属性。</span></strong></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">在定义了限制类型</span><span>Money</span><span style="font-family: 宋体;">之后，接下来就是定义我们的限制类型校验类</span><span>MoneyValidator</span><span style="font-family: 宋体;">了。限制类型校验类必须实现接口</span><span>javax.validation.ConstraintValidator</span><span style="font-family: 宋体;">，并实现它的</span><span>initialize</span><span style="font-family: 宋体;">和</span><span>isValid</span><span style="font-family: 宋体;">方法。我们先来看一下</span><span>MoneyValidator</span><span style="font-family: 宋体;">的代码示例：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%20%0Aimport%20java.util.regex.Pattern%3B%0A%20%0Aimport%20javax.validation.ConstraintValidator%3B%0Aimport%20javax.validation.ConstraintValidatorContext%3B%0A%20%0Aimport%20com.xxx.xxx.constraint.Money%3B%0A%20%0Apublic%20class%20MoneyValidator%20implements%20ConstraintValidator%3CMoney%2C%20Double%3E%20%7B%0A%20%0A%20%20%20%20private%20String%20moneyReg%20%3D%20%22%5E%5C%5Cd%2B(%5C%5C.%5C%5Cd%7B1%2C2%7D)%3F%24%22%3B%2F%2F%E8%A1%A8%E7%A4%BA%E9%87%91%E9%A2%9D%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%20%20%20%20private%20Pattern%20moneyPattern%20%3D%20Pattern.compile(moneyReg)%3B%0A%20%20%20%0A%20%20%20%20public%20void%20initialize(Money%20money)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20boolean%20isValid(Double%20value%2C%20ConstraintValidatorContext%20arg1)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%20if%20(value%20%3D%3D%20null)%0A%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20return%20moneyPattern.matcher(value.toString()).matches()%3B%0A%20%20%20%20%7D%0A%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;java.util.regex.Pattern;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.ConstraintValidator;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">import</span><span>&nbsp;javax.validation.ConstraintValidatorContext;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="keyword">import</span><span>&nbsp;com.xxx.xxx.constraint.Money;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;MoneyValidator&nbsp;</span><span class="keyword">implements</span><span>&nbsp;ConstraintValidator&lt;Money,&nbsp;Double&gt;&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;String&nbsp;moneyReg&nbsp;=&nbsp;</span><span class="string">"^\\d+(\\.\\d{1,2})?$"</span><span>;</span><span class="comment">//表示金额的正则表达式</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;Pattern&nbsp;moneyPattern&nbsp;=&nbsp;Pattern.compile(moneyReg);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;initialize(Money&nbsp;money)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">boolean</span><span>&nbsp;isValid(Double&nbsp;value,&nbsp;ConstraintValidatorContext&nbsp;arg1)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(value&nbsp;==&nbsp;</span><span class="keyword">null</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="keyword">true</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;moneyPattern.matcher(value.toString()).matches();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="8" title="SpringMVC介绍之Validation" style="display: none;"> 
import java.util.regex.Pattern;
 
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;
 
import com.xxx.xxx.constraint.Money;
 
public class MoneyValidator implements ConstraintValidator&lt;Money, Double&gt; {
 
    private String moneyReg = "^\\d+(\\.\\d{1,2})?$";//表示金额的正则表达式
    private Pattern moneyPattern = Pattern.compile(moneyReg);
   
    public void initialize(Money money) {
       // TODO Auto-generated method stub
      
    }
 
    public boolean isValid(Double value, ConstraintValidatorContext arg1) {
       // TODO Auto-generated method stub
       if (value == null)
           return true;
       return moneyPattern.matcher(value.toString()).matches();
    }
 
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">从上面代码中我们可以看到</span><span>ConstraintValidator</span><span style="font-family: 宋体;">是使用了泛型的。它一共需要指定两种类型，第一个类型是对应的</span><span>initialize</span><span style="font-family: 宋体;">方法的参数类型，第二个类型是对应的</span><span>isValid</span><span style="font-family: 宋体;">方法的第一个参数类型。从上面的两个方法我们可以看出</span><span>isValid</span><span style="font-family: 宋体;">方法是用于进行校验的，有时候我们在校验的过程中是需要取当前的限制类型的属性来进行校验的，比如我们在对</span><span>@Min</span><span style="font-family: 宋体;">限制类型进行校验的时候我们是需要通过其</span><span>value</span><span style="font-family: 宋体;">属性获取到当前校验类型定义的最小值的，我们可以看到</span><span>isValid</span><span style="font-family: 宋体;">方法无法获取到当前的限制类型</span><span>Money</span><span style="font-family: 宋体;">。这个时候</span><span>initialize</span><span style="font-family: 宋体;">方法的作用就出来了。我们知道</span><span>initialize</span><span style="font-family: 宋体;">方法是可以获取到当前的限制类型的，所以当我们在校验某种限制类型时需要获取当前限制类型的某种属性的时候，我们可以给当前的</span><span>ConstraintValidator</span><span style="font-family: 宋体;">定义对应的属性，然后在</span><span>initialize</span><span style="font-family: 宋体;">方法中给该属性赋值，接下来我们就可以在</span><span>isValid</span><span style="font-family: 宋体;">方法中使用其对应的属性了。针对于这种情况我们来看一个代码示例，现在假设我要定义自己的</span><span>@Min</span><span style="font-family: 宋体;">限制类型和对应的</span><span>MinValidator</span><span style="font-family: 宋体;">校验器，那么我可以如下定义：</span></p>
<p class="MsoNormal"><strong><span>Min</span></strong><strong><span style="font-family: 宋体;">限制类型</span></strong></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%40Target(%7BElementType.FIELD%2C%20ElementType.METHOD%7D)%0A%40Retention(RetentionPolicy.RUNTIME)%0A%40Constraint(validatedBy%3DMinValidator.class)%0Apublic%20%40interface%20Min%20%7B%0A%20%0A%20%20%20%20int%20value()%20default%200%3B%0A%20%20%20%0A%20%20%20%20String%20message()%3B%0A%20%20%20%0A%20%20%20%20Class%3C%3F%3E%5B%5D%20groups()%20default%20%7B%7D%3B%0A%20%20%20%0A%20%20%20%20Class%3C%3F%20extends%20Payload%3E%5B%5D%20payload()%20default%20%7B%7D%3B%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="annotation">@Target</span><span>({ElementType.FIELD,&nbsp;ElementType.METHOD})&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@Retention</span><span>(RetentionPolicy.RUNTIME)&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@Constraint</span><span>(validatedBy=MinValidator.</span><span class="keyword">class</span><span>)&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">@interface</span><span>&nbsp;Min&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span><span>&nbsp;value()&nbsp;</span><span class="keyword">default</span><span>&nbsp;</span><span class="number">0</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;message();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&gt;[]&nbsp;groups()&nbsp;<span class="keyword">default</span><span>&nbsp;{};&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;Class&lt;?&nbsp;<span class="keyword">extends</span><span>&nbsp;Payload&gt;[]&nbsp;payload()&nbsp;</span><span class="keyword">default</span><span>&nbsp;{};&nbsp;&nbsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="9" title="SpringMVC介绍之Validation" style="display: none;">@Target({ElementType.FIELD, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy=MinValidator.class)
public @interface Min {
 
    int value() default 0;
   
    String message();
   
    Class&lt;?&gt;[] groups() default {};
   
    Class&lt;? extends Payload&gt;[] payload() default {};
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;</span></p>
<p class="MsoNormal"><strong><span>MinValidator</span></strong><strong><span style="font-family: 宋体;">校验器</span></strong></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20MinValidator%20implements%20ConstraintValidator%3CMin%2C%20Integer%3E%20%7B%0A%20%0A%20%20%20%20private%20int%20minValue%3B%0A%20%20%20%0A%20%20%20%20public%20void%20initialize(Min%20min)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%20%2F%2F%E6%8A%8AMin%E9%99%90%E5%88%B6%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B1%9E%E6%80%A7value%E8%B5%8B%E5%80%BC%E7%BB%99%E5%BD%93%E5%89%8DConstraintValidator%E7%9A%84%E6%88%90%E5%91%98%E5%8F%98%E9%87%8FminValue%0A%20%20%20%20%20%20%20minValue%20%3D%20min.value()%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20boolean%20isValid(Integer%20value%2C%20ConstraintValidatorContext%20arg1)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%20%2F%2F%E5%9C%A8%E8%BF%99%E9%87%8C%E6%88%91%E4%BB%AC%E5%B0%B1%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E5%BD%93%E5%89%8DConstraintValidator%E7%9A%84%E6%88%90%E5%91%98%E5%8F%98%E9%87%8FminValue%E8%AE%BF%E9%97%AE%E5%88%B0%E5%BD%93%E5%89%8D%E9%99%90%E5%88%B6%E7%B1%BB%E5%9E%8BMin%E7%9A%84value%E5%B1%9E%E6%80%A7%E4%BA%86%0A%20%20%20%20%20%20%20return%20value%20%3E%3D%20minValue%3B%0A%20%20%20%20%7D%0A%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;MinValidator&nbsp;</span><span class="keyword">implements</span><span>&nbsp;ConstraintValidator&lt;Min,&nbsp;Integer&gt;&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="keyword">int</span><span>&nbsp;minValue;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;initialize(Min&nbsp;min)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//把Min限制类型的属性value赋值给当前ConstraintValidator的成员变量minValue</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minValue&nbsp;=&nbsp;min.value();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">boolean</span><span>&nbsp;isValid(Integer&nbsp;value,&nbsp;ConstraintValidatorContext&nbsp;arg1)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//在这里我们就可以通过当前ConstraintValidator的成员变量minValue访问到当前限制类型Min的value属性了</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;value&nbsp;&gt;=&nbsp;minValue;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="10" title="SpringMVC介绍之Validation" style="display: none;">public class MinValidator implements ConstraintValidator&lt;Min, Integer&gt; {
 
    private int minValue;
   
    public void initialize(Min min) {
       // TODO Auto-generated method stub
       //把Min限制类型的属性value赋值给当前ConstraintValidator的成员变量minValue
       minValue = min.value();
    }
 
    public boolean isValid(Integer value, ConstraintValidatorContext arg1) {
       // TODO Auto-generated method stub
       //在这里我们就可以通过当前ConstraintValidator的成员变量minValue访问到当前限制类型Min的value属性了
       return value &gt;= minValue;
    }
 
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><strong><span>&nbsp;</span></strong></p>
<p class="MsoNormal"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong><span style="font-family: 宋体;">继续来说一下</span><strong><span style="color: red;">ConstraintValidator</span></strong><strong><span style="font-family: 宋体; color: red;">泛型的第二个类型</span></strong><span style="font-family: 宋体;">，我们已经知道它的第二个类型是<strong><span style="color: red;">对应的</span></strong></span><strong><span style="color: red;">isValid</span></strong><strong><span style="font-family: 宋体; color: red;">的方法的第一个参数</span></strong><span style="font-family: 宋体;">，从我给的参数名称</span><span>value</span><span style="font-family: 宋体;">来看也可以知道</span><span>isValid</span><span style="font-family: 宋体;">方法的第一个参数正是对应的当前需要校验的数据的值，而它的类型也<strong><span style="color: red;">正是对应的我们需要校验的数据的数据类型。</span></strong>这两者的数据类型必须保持一致，否则</span><span>Spring</span><span style="font-family: 宋体;">会提示找不到对应数据类型的</span><span>ConstraintValidator</span><span style="font-family: 宋体;">。建立了自己的限制类型及其对应的</span><span>ConstraintValidator</span><span style="font-family: 宋体;">后，其用法跟标准的</span><span>JSR-303</span><span style="font-family: 宋体;">限制类型是一样的。以下就是使用了上述自己定义的</span><span>JSR-303</span><span style="font-family: 宋体;">限制类型——</span><span>Money</span><span style="font-family: 宋体;">限制和</span><span>Min</span><span style="font-family: 宋体;">限制的一个实体类：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=public%20class%20User%20%7B%0A%20%20%20%0A%20%20%20%20private%20int%20age%3B%0A%20%20%20%0A%20%20%20%20private%20Double%20salary%3B%0A%20%0A%20%20%20%20%40Min(value%3D8%2C%20message%3D%22%E5%B9%B4%E9%BE%84%E4%B8%8D%E8%83%BD%E5%B0%8F%E4%BA%8E8%E5%B2%81%22)%0A%20%20%20%20public%20int%20getAge()%20%7B%0A%20%20%20%20%20%20%20return%20age%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20setAge(int%20age)%20%7B%0A%20%20%20%20%20%20%20this.age%20%3D%20age%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20%40Money(message%3D%22%E6%A0%87%E5%87%86%E7%9A%84%E9%87%91%E9%A2%9D%E5%BD%A2%E5%BC%8F%E4%B8%BAxxx.xx%22)%0A%20%20%20%20public%20Double%20getSalary()%20%7B%0A%20%20%20%20%20%20%20return%20salary%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20void%20setSalary(Double%20salary)%20%7B%0A%20%20%20%20%20%20%20this.salary%20%3D%20salary%3B%0A%20%20%20%20%7D%0A%20%20%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;User&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;</span><span class="keyword">int</span><span>&nbsp;age;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;Double&nbsp;salary;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Min</span><span>(value=</span><span class="number">8</span><span>,&nbsp;message=</span><span class="string">"年龄不能小于8岁"</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">int</span><span>&nbsp;getAge()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;age;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setAge(</span><span class="keyword">int</span><span>&nbsp;age)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.age&nbsp;=&nbsp;age;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Money</span><span>(message=</span><span class="string">"标准的金额形式为xxx.xx"</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;Double&nbsp;getSalary()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;salary;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setSalary(Double&nbsp;salary)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.salary&nbsp;=&nbsp;salary;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="11" title="SpringMVC介绍之Validation" style="display: none;">public class User {
   
    private int age;
   
    private Double salary;
 
    @Min(value=8, message="年龄不能小于8岁")
    public int getAge() {
       return age;
    }
 
    public void setAge(int age) {
       this.age = age;
    }
 
    @Money(message="标准的金额形式为xxx.xx")
    public Double getSalary() {
       return salary;
    }
 
    public void setSalary(Double salary) {
       this.salary = salary;
    }
   
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;</span></p>
<p class="MsoNormal"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 宋体;">另外再讲一点</span><span>Spring</span><span style="font-family: 宋体;">对自定义</span><span>JSR-303</span><span style="font-family: 宋体;">限制类型支持的新特性，那就是</span><strong><span style="color: red;">Spring</span></strong><strong><span style="font-family: 宋体; color: red;">支持往</span><span style="color: red;">ConstraintValidator</span></strong><strong><span style="font-family: 宋体; color: red;">里面注入</span><span style="color: red;">bean</span></strong><strong><span style="font-family: 宋体; color: red;">对象</span></strong><span style="font-family: 宋体;">。现在假设我们在</span><span>MoneyValidator</span><span style="font-family: 宋体;">里面需要用到</span><span>Spring ApplicationContext</span><span style="font-family: 宋体;">容器中的一个</span><span>UserController bean</span><span style="font-family: 宋体;">对象，那么我们可以给</span><span>ConstraintValidator</span><span style="font-family: 宋体;">定义一个</span><span>UserController</span><span style="font-family: 宋体;">属性，并给定其</span><span>set</span><span style="font-family: 宋体;">方法，在</span><span>set</span><span style="font-family: 宋体;">方法上加注解</span><span>@Resource</span><span style="font-family: 宋体;">或</span><span>@Autowired</span><span style="font-family: 宋体;">通过</span><span>set</span><span style="font-family: 宋体;">方式来注入当前的</span><span>ApplicationContext</span><span style="font-family: 宋体;">中拥有的</span><span>UserController bean</span><span style="font-family: 宋体;">对象。关于</span><span>@Resource</span><span style="font-family: 宋体;">和</span><span>@AutoWired</span><span style="font-family: 宋体;">的区别可以参考</span><span><a href="http://haohaoxuexi.iteye.com/blog/1044152"><span style="font-family: 宋体;">这篇博客</span></a></span><span style="font-family: 宋体;">。所以我们可以这样来定义我们的</span><span>MoneyValidator</span><span style="font-family: 宋体;">：</span></p>
<div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%20%0Apublic%20class%20MoneyValidator%20implements%20ConstraintValidator%3CMoney%2C%20Double%3E%20%7B%0A%20%0A%20%20%20%20private%20String%20moneyReg%20%3D%20%22%5E%5C%5Cd%2B(%5C%5C.%5C%5Cd%7B1%2C2%7D)%3F%24%22%3B%2F%2F%E8%A1%A8%E7%A4%BA%E9%87%91%E9%A2%9D%E7%9A%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%20%20%20%20private%20Pattern%20moneyPattern%20%3D%20Pattern.compile(moneyReg)%3B%0A%20%20%20%20private%20UserController%20controller%3B%0A%20%20%20%0A%20%20%20%20public%20void%20initialize(Money%20money)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20boolean%20isValid(Double%20value%2C%20ConstraintValidatorContext%20arg1)%20%7B%0A%20%20%20%20%20%20%20%2F%2F%20TODO%20Auto-generated%20method%20stub%0A%20%20%20%20%20%20%20System.out.println(%22UserController%3A%20..............%22%20%2B%20controller)%3B%0A%20%20%20%20%20%20%20if%20(value%20%3D%3D%20null)%0A%20%20%20%20%20%20%20%20%20%20%20returntrue%3B%0A%20%20%20%20%20%20%20return%20moneyPattern.matcher(value.toString()).matches()%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20public%20UserController%20getController()%20%7B%0A%20%20%20%20%20%20%20return%20controller%3B%0A%20%20%20%20%7D%0A%20%0A%20%20%20%20%40Resource%0A%20%20%20%20public%20void%20setController(UserController%20controller)%20%7B%0A%20%20%20%20%20%20%20this.controller%20%3D%20controller%3B%0A%20%20%20%20%7D%0A%20%0A%7D" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;MoneyValidator&nbsp;</span><span class="keyword">implements</span><span>&nbsp;ConstraintValidator&lt;Money,&nbsp;Double&gt;&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;String&nbsp;moneyReg&nbsp;=&nbsp;</span><span class="string">"^\\d+(\\.\\d{1,2})?$"</span><span>;</span><span class="comment">//表示金额的正则表达式</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;Pattern&nbsp;moneyPattern&nbsp;=&nbsp;Pattern.compile(moneyReg);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span><span>&nbsp;UserController&nbsp;controller;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;initialize(Money&nbsp;money)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">boolean</span><span>&nbsp;isValid(Double&nbsp;value,&nbsp;ConstraintValidatorContext&nbsp;arg1)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"UserController:&nbsp;.............."</span><span>&nbsp;+&nbsp;controller);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(value&nbsp;==&nbsp;</span><span class="keyword">null</span><span>)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returntrue;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;moneyPattern.matcher(value.toString()).matches();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;UserController&nbsp;getController()&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;controller;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Resource</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;setController(UserController&nbsp;controller)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span><span>.controller&nbsp;=&nbsp;controller;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="1812584" codeable_type="Blog" source_url="http://haohaoxuexi.iteye.com/blog/1812584" pre_index="12" title="SpringMVC介绍之Validation" style="display: none;"> 
public class MoneyValidator implements ConstraintValidator&lt;Money, Double&gt; {
 
    private String moneyReg = "^\\d+(\\.\\d{1,2})?$";//表示金额的正则表达式
    private Pattern moneyPattern = Pattern.compile(moneyReg);
    private UserController controller;
   
    public void initialize(Money money) {
       // TODO Auto-generated method stub
      
    }
 
    public boolean isValid(Double value, ConstraintValidatorContext arg1) {
       // TODO Auto-generated method stub
       System.out.println("UserController: .............." + controller);
       if (value == null)
           returntrue;
       return moneyPattern.matcher(value.toString()).matches();
    }
 
    public UserController getController() {
       return controller;
    }
 
    @Resource
    public void setController(UserController controller) {
       this.controller = controller;
    }
 
}</pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span>&nbsp;</span></p>
<p class="MsoNormal"><span>&nbsp;</span></p>
</div>
  </div>

  

  
  
  <iframe src="about:blank" scrolling="no" width="0" height="0" frameborder="0" style="display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 468px 60px;"></iframe>
  
  <div id="bottoms" class="clearfix">
    <div id="digg_bottom" class="clearfix"><div class="digged"><strong>24</strong> <br>顶</div><div class="digged"><strong>2</strong> <br>踩</div></div>
    <div id="share_weibo">分享到：
      <a data-type="sina" href="javascript:;" title="分享到新浪微博"><img src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/sina.jpg"></a>
      <a data-type="qq" href="javascript:;" title="分享到腾讯微博"><img src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/tec.jpg"></a>
    </div>
  </div>

  <div class="blog_nav">
    <div class="pre_next">
      <a href="http://haohaoxuexi.iteye.com/blog/1820541" class="next" title="几道面试题">几道面试题</a>
      |
      <a href="http://haohaoxuexi.iteye.com/blog/1807330" class="pre" title="SpringMVC表单标签简介">SpringMVC表单标签简介</a>
    </div>
  </div>
  <div class="blog_bottom">
    <ul>
      <li>2013-02-22 16:41</li>
      <li>浏览 29238</li>
      <li><a href="http://haohaoxuexi.iteye.com/blog/1812584#comments">评论(20)</a></li>
      
      
      <li>分类:<a href="http://www.iteye.com/blogs/category/opensource">开源软件</a></li>      
      <li class="last"><a href="http://www.iteye.com/wiki/blog/1812584" target="_blank" class="more">相关推荐</a></li>
    </ul>
  </div>

  <div class="blog_comment">
    <h5>评论</h5>
    <a id="comments" name="comments"></a>
    <div id="bc2340037">
  <div class="comment_title">
    20 楼
    <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>
    2014-02-19&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">fsh430623 写道</div><div class="quote_div">我这里有一个这样的问题，就是允许空值时，应该不进行相应的验证，但实际进行了，如下：在空值时我不希望进行手机号码格式验证。<br>	@Pattern(regexp = "^1[3-8]{1}\\d{9}$", message =&nbsp;&nbsp; "${formatter.getMobile}")<br>	public String getMobile() {<br>		return this.mobile;<br>	}<br><br>但是在这种情况下，页面没有输入时，在后台获得的相应值为空字符串""，这样仍然会进行格式验证，提示手机号码格式错误，本人希望这时不进行格式验证，大家有没有好的处理办法<br>不知道大家有没有处理过这种情况。 <br>&nbsp;&nbsp;&nbsp;&nbsp; </div><br>有两种方式可以解决你这个问题：<br>1.该正则表达式支持空串，如：“^(1[3-8]{1}\\d{9})?$”。<br>2.自定义一个校验器，在其对应的ConstraintValidator中针对于空值放行。</div>
</div>

<div id="bc2339966">
  <div class="comment_title">
    19 楼
    <a href="http://fsh430623.iteye.com/" target="_blank" title="fsh430623">fsh430623</a>
    2014-02-19&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">我这里有一个这样的问题，就是允许空值时，应该不进行相应的验证，但实际进行了，如下：在空值时我不希望进行手机号码格式验证。<br>	@Pattern(regexp = "^1[3-8]{1}\\d{9}$", message =&nbsp;&nbsp; "${formatter.getMobile}")<br>	public String getMobile() {<br>		return this.mobile;<br>	}<br><br>但是在这种情况下，页面没有输入时，在后台获得的相应值为空字符串""，这样仍然会进行格式验证，提示手机号码格式错误，本人希望这时不进行格式验证，大家有没有好的处理办法<br>不知道大家有没有处理过这种情况。 <br>&nbsp;&nbsp;&nbsp;&nbsp; </div>
</div>

<div id="bc2339426">
  <div class="comment_title">
    18 楼
    <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>
    2014-02-12&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">u013484186 写道</div><div class="quote_div">问一下，跟着写到@NotBlank那边就一直说我没导入包：The import org.hibernate cannot be resolved。但是我导入了validation-api-1.0.0.GA.jar。我尝试过导入hibernate-validator.jar都是这个错误。我应该导入哪个包？谢谢</div><br>确实应该导入Hibernate validator这个工程的包，具体原因你再自己找找吧。</div>
</div>

<div id="bc2339404">
  <div class="comment_title">
    17 楼
    <a href="http://u013484186.iteye.com/" target="_blank" title="u013484186">u013484186</a>
    2014-02-11&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">问一下，跟着写到@NotBlank那边就一直说我没导入包：The import org.hibernate cannot be resolved。但是我导入了validation-api-1.0.0.GA.jar。我尝试过导入hibernate-validator.jar都是这个错误。我应该导入哪个包？谢谢</div>
</div>

<div id="bc2338500">
  <div class="comment_title">
    16 楼
    <a href="http://chensongit.iteye.com/" target="_blank" title="chensongIT">chensongIT</a>
    2014-01-22&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><img src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_arrow.gif">&nbsp;<img src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_idea.gif"> </div>
</div>

<div id="bc2338499">
  <div class="comment_title">
    15 楼
    <a href="http://chensongit.iteye.com/" target="_blank" title="chensongIT">chensongIT</a>
    2014-01-22&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">&lt;b&gt;hello&lt;/b&gt;</div>
</div>

<div id="bc2331517">
  <div class="comment_title">
    14 楼
    <a href="http://stillotherguy.iteye.com/" target="_blank" title="stillotherguy">stillotherguy</a>
    2013-11-17&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">ganwb0317 写道</div><div class="quote_div">我觉得用JSR-303那样注解不太好，因为消息都写在实体类里面去了，用spring的validate可以把消息放在资源文件，而且还支持国际化，这比JSR-303不是更好吗</div><br>注解的message可以写属性文件的里的key值</div>
</div>

<div id="bc2329857">
  <div class="comment_title">
    13 楼
    <a href="http://ganwb0317.iteye.com/" target="_blank" title="ganwb0317">ganwb0317</a>
    2013-10-31&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">我觉得用JSR-303那样注解不太好，因为消息都写在实体类里面去了，用spring的validate可以把消息放在资源文件，而且还支持国际化，这比JSR-303不是更好吗</div>
</div>

<div id="bc2316748">
  <div class="comment_title">
    12 楼
    <a href="http://godgege.iteye.com/" target="_blank" title="非法用户">非法用户</a>
    2013-06-27&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">234390216 写道</div><div class="quote_div"><div class="quote_title">liqingyuan 写道</div><div class="quote_div">写得很清晰，谢谢了。<br>另外有个疑问，默认的groups 和 payload属性是做什么的，看了文档没看明白。</div><br>我暂时还没发现，没有用到。</div><br>在调用validator.validate(obj, A.class);可以指定一个group，那么只校验加了A.class 这个group的字段<br>payload，可以自定义一些元数据信息，比如严重级别等等，实现Payload接口即可，在校验完毕后可以在ConstraintDescriptor中获取到</div>
</div>

<div id="bc2316732">
  <div class="comment_title">
    11 楼
    <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>
    2013-06-27&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">liqingyuan 写道</div><div class="quote_div">写得很清晰，谢谢了。<br>另外有个疑问，默认的groups 和 payload属性是做什么的，看了文档没看明白。</div><br>我暂时还没发现，没有用到。</div>
</div>

<div id="bc2316683">
  <div class="comment_title">
    10 楼
    <a href="http://liqinyuan.iteye.com/" target="_blank" title="liqingyuan">liqingyuan</a>
    2013-06-27&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">写得很清晰，谢谢了。<br>另外有个疑问，默认的groups 和 payload属性是做什么的，看了文档没看明白。</div>
</div>

<div id="bc2311219">
  <div class="comment_title">
    9 楼
    <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>
    2013-05-13&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">非法用户 写道</div><div class="quote_div"><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%40Choose(message%3D%22%E8%AF%B7%E6%8C%87%E5%AE%9A%E5%90%88%E6%B3%95%E7%9A%84%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B%22%2C%20elements%3D%7BTYPE_FILE%2C%20TYPE_IMAGE%2C%20TYPE_TEXT%7D)%0Aprivate%20String%20type%3B%0A%40NotBlank%0Aprivate%20String%20filename%3B%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="annotation">@Choose</span><span>(message=</span><span class="string">"请指定合法的消息类型"</span><span>,&nbsp;elements={TYPE_FILE,&nbsp;TYPE_IMAGE,&nbsp;TYPE_TEXT})&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;type;&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@NotBlank</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;filename;&nbsp;&nbsp;</span></span></li></ol></div><pre class="java" name="code" codeable_id="2311219" codeable_type="BlogComment" source_url="http://haohaoxuexi.iteye.com/blog/1812584#bc2311219" pre_index="0" title="SpringMVC介绍之Validation" style="display: none;">@Choose(message="请指定合法的消息类型", elements={TYPE_FILE, TYPE_IMAGE, TYPE_TEXT})
private String type;
@NotBlank
private String filename;
</pre><br>如果type是TYPE_FILE或者TYPE_IMAGE时，filename必填。现在用@NotBlank来校验的话，没办法知道type的值，自定义校验器也取不到type的值<br>如何在校验filename的时候引用另一个属性的值？</div><br>这种貌似没有办法，只能自己进行校验了。</div>
</div>

<div id="bc2311087">
  <div class="comment_title">
    8 楼
    <a href="http://godgege.iteye.com/" target="_blank" title="非法用户">非法用户</a>
    2013-05-13&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%40Choose(message%3D%22%E8%AF%B7%E6%8C%87%E5%AE%9A%E5%90%88%E6%B3%95%E7%9A%84%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B%22%2C%20elements%3D%7BTYPE_FILE%2C%20TYPE_IMAGE%2C%20TYPE_TEXT%7D)%0Aprivate%20String%20type%3B%0A%40NotBlank%0Aprivate%20String%20filename%3B%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="annotation">@Choose</span><span>(message=</span><span class="string">"请指定合法的消息类型"</span><span>,&nbsp;elements={TYPE_FILE,&nbsp;TYPE_IMAGE,&nbsp;TYPE_TEXT})&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;type;&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@NotBlank</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;filename;&nbsp;&nbsp;</span></span></li></ol></div><pre class="java" name="code" codeable_id="2311087" codeable_type="BlogComment" source_url="http://haohaoxuexi.iteye.com/blog/1812584#bc2311087" pre_index="0" title="SpringMVC介绍之Validation" style="display: none;">@Choose(message="请指定合法的消息类型", elements={TYPE_FILE, TYPE_IMAGE, TYPE_TEXT})
private String type;
@NotBlank
private String filename;
</pre><br>如果type是TYPE_FILE或者TYPE_IMAGE时，filename必填。现在用@NotBlank来校验的话，没办法知道type的值，自定义校验器也取不到type的值<br>如何在校验filename的时候引用另一个属性的值？</div>
</div>

<div id="bc2310586">
  <div class="comment_title">
    7 楼
    <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>
    2013-05-08&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">wddgfzs 写道</div><div class="quote_div">使用JSR-303 Validation进行验证能不能实现根据输入条件不同校验不同元素呢？比如：用户注册时，表单（userType，birthday）用户类型为01，校验用户出生日期；用户类型为02，不校验出生日期。该如何实现？</div><br>直接操作的话是不行的，只能自己进行校验了。<br>另外我有一个这样的想法可以实现：在程序中不校验birthDay，表单另外上传一个userType和birthday的组合，或者利用拦截器之类的在后台对userType和birthday进行组合，比如“userType_birthday”，然后自己建立一个针对于这个组合的检验器，在校验器中可以对“userType_birthday”进行拆分，之后就可以根据userType的不同对birthday进行不同的校验</div>
</div>

<div id="bc2310487">
  <div class="comment_title">
    6 楼
    <a href="http://wddgfzs.iteye.com/" target="_blank" title="wddgfzs">wddgfzs</a>
    2013-05-08&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">使用JSR-303 Validation进行验证能不能实现根据输入条件不同校验不同元素呢？比如：用户注册时，表单（userType，birthday）用户类型为01，校验用户出生日期；用户类型为02，不校验出生日期。该如何实现？</div>
</div>

<div id="bc2310358">
  <div class="comment_title">
    5 楼
    <a href="http://buffering.iteye.com/" target="_blank" title="buffering">buffering</a>
    2013-05-07&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">学习了，感谢。</div>
</div>

<div id="bc2304086">
  <div class="comment_title">
    4 楼
    <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>
    2013-03-15&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">yzxqml 写道</div><div class="quote_div"><div class="quote_title">234390216 写道</div><div class="quote_div"><div class="quote_title">yzxqml 写道</div><div class="quote_div">能给个实例么？我现在的情况是校验生效了，但是数据不符合校验规则时直接抛出了异常，SpringMVC中捕捉不到。。。。。bindingResult.hasErrors()一直是0.。。</div><br>上面讲的就是一个实例，你可以把抛出来的异常以及你的实体类代码贴出来看一下。</div><br><br>实体类：<br><br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%09private%20Integer%20id%3B%20%20%20%0A%09%40Min(4)%0A%09private%20String%20username%3B%20%0A%09private%20String%20name%3B%20%20%0A%09private%20String%20password%3B%0A%09private%20String%20role%3B%0A%09private%20Date%20logintime%3B%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">private</span><span>&nbsp;Integer&nbsp;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@Min</span><span>(</span><span class="number">4</span><span>)&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;username;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;name;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;role;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;Date&nbsp;logintime;&nbsp;&nbsp;</span></span></li></ol></div><pre class="java" name="code" codeable_id="2304086" codeable_type="BlogComment" source_url="http://haohaoxuexi.iteye.com/blog/1812584#bc2304086" pre_index="0" title="SpringMVC介绍之Validation" style="display: none;">	private Integer id;   
	@Min(4)
	private String username; 
	private String name;  
	private String password;
	private String role;
	private Date logintime;
</pre><br><br>异常：<br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=javax.validation.ConstraintViolationException%3A%20Validation%20failed%20for%20classes%20%5Borg.yzsoft.springmvc.vo.TUsers%5D%20during%20persist%20time%20for%20groups%20%5Bjavax.validation.groups.Default%2C%20%5D%0AList%20of%20constraint%20violations%3A%5B%0A%09ConstraintViolationImpl%7BinterpolatedMessage%3D&#39;%E6%9C%80%E5%B0%8F%E4%B8%8D%E8%83%BD%E5%B0%8F%E4%BA%8E4&#39;%2C%20propertyPath%3Dusername%2C%20rootBeanClass%3Dclass%20org.yzsoft.springmvc.vo.TUsers%2C%20messageTemplate%3D&#39;%7Bjavax.validation.constraints.Min.message%7D&#39;%7D%0A%5D%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>javax.validation.ConstraintViolationException:&nbsp;Validation&nbsp;failed&nbsp;</span><span class="keyword">for</span><span>&nbsp;classes&nbsp;[org.yzsoft.springmvc.vo.TUsers]&nbsp;during&nbsp;persist&nbsp;time&nbsp;</span><span class="keyword">for</span><span>&nbsp;groups&nbsp;[javax.validation.groups.Default,&nbsp;]&nbsp;&nbsp;</span></span></li><li><span>List&nbsp;of&nbsp;constraint&nbsp;violations:[&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;ConstraintViolationImpl{interpolatedMessage=<span class="string">'最小不能小于4'</span><span>,&nbsp;propertyPath=username,&nbsp;rootBeanClass=</span><span class="keyword">class</span><span>&nbsp;org.yzsoft.springmvc.vo.TUsers,&nbsp;messageTemplate=</span><span class="string">'{javax.validation.constraints.Min.message}'</span><span>}&nbsp;&nbsp;</span></span></li><li><span>]&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="2304086" codeable_type="BlogComment" source_url="http://haohaoxuexi.iteye.com/blog/1812584#bc2304086" pre_index="1" title="SpringMVC介绍之Validation" style="display: none;">javax.validation.ConstraintViolationException: Validation failed for classes [org.yzsoft.springmvc.vo.TUsers] during persist time for groups [javax.validation.groups.Default, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='最小不能小于4', propertyPath=username, rootBeanClass=class org.yzsoft.springmvc.vo.TUsers, messageTemplate='{javax.validation.constraints.Min.message}'}
]
</pre></div><br>@Min是用来限制数字大小的，不是限制字符串的。这里用错了，要限制长度的话可以使用Hibernate Validator里面封装好的@Length限制，或者根据上面博客里面的方法定义自己的限制。</div>
</div>

<div id="bc2304072">
  <div class="comment_title">
    3 楼
    <a href="http://yzxqml.iteye.com/" target="_blank" title="yzxqml">yzxqml</a>
    2013-03-15&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">234390216 写道</div><div class="quote_div"><div class="quote_title">yzxqml 写道</div><div class="quote_div">能给个实例么？我现在的情况是校验生效了，但是数据不符合校验规则时直接抛出了异常，SpringMVC中捕捉不到。。。。。bindingResult.hasErrors()一直是0.。。</div><br>上面讲的就是一个实例，你可以把抛出来的异常以及你的实体类代码贴出来看一下。</div><br><br>实体类：<br><br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%09private%20Integer%20id%3B%20%20%20%0A%09%40Min(4)%0A%09private%20String%20username%3B%20%0A%09private%20String%20name%3B%20%20%0A%09private%20String%20password%3B%0A%09private%20String%20role%3B%0A%09private%20Date%20logintime%3B%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span class="keyword">private</span><span>&nbsp;Integer&nbsp;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="annotation">@Min</span><span>(</span><span class="number">4</span><span>)&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;username;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;name;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;password;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;String&nbsp;role;&nbsp;&nbsp;</span></span></li><li><span><span class="keyword">private</span><span>&nbsp;Date&nbsp;logintime;&nbsp;&nbsp;</span></span></li></ol></div><pre class="java" name="code" codeable_id="2304072" codeable_type="BlogComment" source_url="http://haohaoxuexi.iteye.com/blog/1812584#bc2304072" pre_index="0" title="SpringMVC介绍之Validation" style="display: none;">	private Integer id;   
	@Min(4)
	private String username; 
	private String name;  
	private String password;
	private String role;
	private Date logintime;
</pre><br><br>异常：<br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=javax.validation.ConstraintViolationException%3A%20Validation%20failed%20for%20classes%20%5Borg.yzsoft.springmvc.vo.TUsers%5D%20during%20persist%20time%20for%20groups%20%5Bjavax.validation.groups.Default%2C%20%5D%0AList%20of%20constraint%20violations%3A%5B%0A%09ConstraintViolationImpl%7BinterpolatedMessage%3D&#39;%E6%9C%80%E5%B0%8F%E4%B8%8D%E8%83%BD%E5%B0%8F%E4%BA%8E4&#39;%2C%20propertyPath%3Dusername%2C%20rootBeanClass%3Dclass%20org.yzsoft.springmvc.vo.TUsers%2C%20messageTemplate%3D&#39;%7Bjavax.validation.constraints.Min.message%7D&#39;%7D%0A%5D%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>javax.validation.ConstraintViolationException:&nbsp;Validation&nbsp;failed&nbsp;</span><span class="keyword">for</span><span>&nbsp;classes&nbsp;[org.yzsoft.springmvc.vo.TUsers]&nbsp;during&nbsp;persist&nbsp;time&nbsp;</span><span class="keyword">for</span><span>&nbsp;groups&nbsp;[javax.validation.groups.Default,&nbsp;]&nbsp;&nbsp;</span></span></li><li><span>List&nbsp;of&nbsp;constraint&nbsp;violations:[&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;ConstraintViolationImpl{interpolatedMessage=<span class="string">'最小不能小于4'</span><span>,&nbsp;propertyPath=username,&nbsp;rootBeanClass=</span><span class="keyword">class</span><span>&nbsp;org.yzsoft.springmvc.vo.TUsers,&nbsp;messageTemplate=</span><span class="string">'{javax.validation.constraints.Min.message}'</span><span>}&nbsp;&nbsp;</span></span></li><li><span>]&nbsp;&nbsp;</span></li></ol></div><pre class="java" name="code" codeable_id="2304072" codeable_type="BlogComment" source_url="http://haohaoxuexi.iteye.com/blog/1812584#bc2304072" pre_index="1" title="SpringMVC介绍之Validation" style="display: none;">javax.validation.ConstraintViolationException: Validation failed for classes [org.yzsoft.springmvc.vo.TUsers] during persist time for groups [javax.validation.groups.Default, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='最小不能小于4', propertyPath=username, rootBeanClass=class org.yzsoft.springmvc.vo.TUsers, messageTemplate='{javax.validation.constraints.Min.message}'}
]
</pre></div>
</div>

<div id="bc2303974">
  <div class="comment_title">
    2 楼
    <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>
    2013-03-15&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content"><div class="quote_title">yzxqml 写道</div><div class="quote_div">能给个实例么？我现在的情况是校验生效了，但是数据不符合校验规则时直接抛出了异常，SpringMVC中捕捉不到。。。。。bindingResult.hasErrors()一直是0.。。</div><br>上面讲的就是一个实例，你可以把抛出来的异常以及你的实体类代码贴出来看一下。</div>
</div>

<div id="bc2303947">
  <div class="comment_title">
    1 楼
    <a href="http://yzxqml.iteye.com/" target="_blank" title="yzxqml">yzxqml</a>
    2013-03-15&nbsp;&nbsp;
    
    
  </div>
  <div class="comment_content">能给个实例么？我现在的情况是校验生效了，但是数据不符合校验规则时直接抛出了异常，SpringMVC中捕捉不到。。。。。bindingResult.hasErrors()一直是0.。。</div>
</div>


    
    
  </div>

  <div class="blog_comment">
    <h5>发表评论</h5>
            <p style="text-align:center; margin-top:30px;margin-bottom:0px;"><a href="http://haohaoxuexi.iteye.com/login" style="background-color:white;"> <img src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/login_icon.png" style="vertical-align:middle; margin-right: 10px;"></a><a href="http://haohaoxuexi.iteye.com/login">  您还没有登录,请您登录后再发表评论 </a></p>
      </div>
</div>


<script type="text/javascript">
  dp.SyntaxHighlighter.HighlightAll('code', true, true);

  $$('#main .blog_content pre[name=code]').each(function(pre, index){ // blog content
    var post_id = 1812584;
    var location = window.location;
    source_url = location.protocol + "//" + location.host + location.pathname + location.search;
    pre.writeAttribute('codeable_id', post_id);
    pre.writeAttribute('codeable_type', "Blog");
    pre.writeAttribute('source_url', source_url);
    pre.writeAttribute('pre_index', index);
    pre.writeAttribute('title', 'SpringMVC介绍之Validation');
  });

  fix_image_size($$('div.blog_content img'), 700);

  function processComment() {
    $$('#main .blog_comment > div').each(function(comment){// comment
      var post_id = comment.id.substr(2);
      $$("#"+comment.id+" pre[name=code]").each(function(pre, index){
        var location = window.location;
        source_url = location.protocol + "//" + location.host + location.pathname + location.search;
        source_url += "#" + comment.id;
        pre.writeAttribute('codeable_id', post_id);
        pre.writeAttribute('codeable_type', "BlogComment");
        pre.writeAttribute('source_url', source_url);
        pre.writeAttribute('pre_index', index);
        pre.writeAttribute('title', 'SpringMVC介绍之Validation');
      });
    });
  }

  function quote_comment(id) {
    new Ajax.Request('/editor/quote', {
      parameters: {'id':id, 'type':'BlogComment'},
      onSuccess:function(response){editor.bbcode_editor.textarea.insertAfterSelection(response.responseText);
        Element.scrollTo(editor.bbcode_editor.textarea.element);}
    });
  }

  code_favorites_init();
  processComment();
  new WeiboShare({share_buttons: $('share_weibo'), img_scope: $('blog_content')});
</script>




        </div>

        <div id="local">
          <div class="local_top"></div>
          <div id="blog_owner">
  <div id="blog_owner_logo"><a href="http://haohaoxuexi.iteye.com/"><img alt="234390216的博客" class="logo" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/392b0b83-7725-374c-a0eb-f9f5b7ab3ddd.jpg" title="234390216的博客: 好好学习，天天向上" width=""></a></div>
  <div id="blog_owner_name">234390216</div>
</div>

          <div id="blog_actions">
            <ul>
              <li>浏览: 979483 次</li>
              <li>性别: <img alt="Icon_minigender_1" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/icon_minigender_1.gif" title="男"></li>
              <li>来自: 长沙</li>
              <li><img src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/offline.gif"></li>
              
            </ul>
          </div>
          <div id="user_visits" class="clearfix">
            <h5>最近访客 <span style="font-weight:normal;font-size:12px;padding-left:30px;"><a href="http://haohaoxuexi.iteye.com/blog/user_visits">更多访客&gt;&gt;</a></span></h5>
            
              <div class="user_visit">
                <div class="logo"><a href="http://eoasis.iteye.com/" target="_blank"><img alt="eoasis的博客" class="logo" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/1f6c891e-d6bc-389b-97f3-62f5cf934657-thumb.jpg" title="eoasis的博客: 网络中的绿洲" width="48px"></a></div>
                <div class="left"><a href="http://eoasis.iteye.com/" target="_blank" title="eoasis">eoasis</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://dylinshi126.iteye.com/" target="_blank"><img alt="dylinshi126的博客" class="logo" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/user-logo-thumb.gif" title="dylinshi126的博客: " width="48px"></a></div>
                <div class="left"><a href="http://dylinshi126.iteye.com/" target="_blank" title="dylinshi126">dylinshi126</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://haha812677.iteye.com/" target="_blank"><img alt="haha812677的博客" class="logo" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/user-logo-thumb.gif" title="haha812677的博客: " width="48px"></a></div>
                <div class="left"><a href="http://haha812677.iteye.com/" target="_blank" title="haha812677">haha812677</a></div>
              </div>
            
              <div class="user_visit">
                <div class="logo"><a href="http://wanluoliang.iteye.com/" target="_blank"><img alt="wanluoliang的博客" class="logo" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/03a6edb7-ca00-3212-94aa-eda67a843983-thumb.jpg" title="wanluoliang的博客: " width="48px"></a></div>
                <div class="left"><a href="http://wanluoliang.iteye.com/" target="_blank" title="wanluoliang">wanluoliang</a></div>
              </div>
            
          </div>

          
            <div>
              <h5>博客专栏</h5>
              

  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/Oracle168" target="_blank"><img alt="A5ee55b9-a463-3d09-9c78-0c0cf33198cd" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/a5ee55b9-a463-3d09-9c78-0c0cf33198cd.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/Oracle168" target="_blank" title="Oracle基础">Oracle基础</a><br>
      <span class="visited">浏览量：37126</span>
    </dd>
  </dl>
  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/springMVC" target="_blank"><img alt="Ad26f909-6440-35a9-b4e9-9aea825bd38e" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/ad26f909-6440-35a9-b4e9-9aea825bd38e.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/springMVC" target="_blank" title="springMVC介绍">springMVC介绍</a><br>
      <span class="visited">浏览量：253889</span>
    </dd>
  </dl>
  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/mybatis" target="_blank"><img alt="Ce363057-ae4d-3ee1-bb46-e7b51a722a4b" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/ce363057-ae4d-3ee1-bb46-e7b51a722a4b.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/mybatis" target="_blank" title="Mybatis简介">Mybatis简介</a><br>
      <span class="visited">浏览量：285799</span>
    </dd>
  </dl>
  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/springjms" target="_blank"><img alt="Bdeb91ad-cf8a-3fe9-942a-3710073b4000" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/bdeb91ad-cf8a-3fe9-942a-3710073b4000.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/springjms" target="_blank" title="Spring整合JMS">Spring整合JMS</a><br>
      <span class="visited">浏览量：50117</span>
    </dd>
  </dl>
  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/ehcache" target="_blank"><img alt="5cbbde67-7cd5-313c-95c2-4185389601e7" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/5cbbde67-7cd5-313c-95c2-4185389601e7.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/ehcache" target="_blank" title="Ehcache简介">Ehcache简介</a><br>
      <span class="visited">浏览量：17975</span>
    </dd>
  </dl>
  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/cas168" target="_blank"><img alt="Cc1c0708-ccc2-3d20-ba47-d40e04440682" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/cc1c0708-ccc2-3d20-ba47-d40e04440682.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/cas168" target="_blank" title="Cas简介">Cas简介</a><br>
      <span class="visited">浏览量：6136</span>
    </dd>
  </dl>
  
  <dl class="series" style="padding-bottom:5px;">
    <dt>
      <a href="http://www.iteye.com/blogs/subjects/spring_security" target="_blank"><img alt="51592fc3-854c-34f4-9eff-cb82d993ab3a" src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/51592fc3-854c-34f4-9eff-cb82d993ab3a.png"></a>
    </dt>
    <dd>
    <a href="http://www.iteye.com/blogs/subjects/spring_security" target="_blank" title="Spring Security简介">Spring Securi...</a><br>
      <span class="visited">浏览量：10675</span>
    </dd>
  </dl>
  


            </div>
          

                      <div id="blog_menu">
              <h5>文章分类</h5>
              <ul>
                <li><a href="http://haohaoxuexi.iteye.com/">全部博客 (203)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/164370">配置文件 (2)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/155097">dwr (2)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/176065">安全 (1)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/172948">电子邮件 (3)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/299032">cxf (3)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/324785">Cas (9)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/161765">CKEDITOR (3)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/319453">ehcache (10)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/158024">extjs4 (6)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/159974">freemarker (2)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/154983">hibernate (5)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/156571">itext (1)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/182974">JasperReport (4)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/155852">java (18)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/131097">jbpm4 (2)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/155042">jfreeChart (3)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/157196">jquery (7)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/202499">jsp (4)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/265283">Linux (1)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/181358">Lucene (1)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/269897">maven (7)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/131096">mybatis (9)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/165959">MySQL (5)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/156935">oracle (29)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/156541">poi (7)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/304463">Servlet (4)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/156737">实用技巧 (5)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/156657">Spring (12)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/175984">SpringMVC (13)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/182468">spring Security (12)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/154645">struts2 (5)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/155732">swing (1)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/177387">svn (1)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/156444">web前端 (5)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/253146">Weblogic (3)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/156645">问题 (2)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/186746">xml (2)</a></li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/category/268768">面试 (1)</a></li>
                
              </ul>
            </div>
            <div id="month_blogs">
              <h5>社区版块</h5>
              <ul>
                <li><a href="http://haohaoxuexi.iteye.com/blog/news">我的资讯</a> (0)</li>
                <li>
                  <a href="http://haohaoxuexi.iteye.com/blog/post">我的论坛</a> (17)
                </li>
                <li><a href="http://haohaoxuexi.iteye.com/blog/answered_problems">我的问答</a> (4)</li>
              </ul>
            </div>
            <div id="month_blogs">
              <h5>存档分类</h5>
              <ul>
                
                  <li><a href="http://haohaoxuexi.iteye.com/blog/monthblog/2014-12">2014-12</a> (3)</li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/blog/monthblog/2014-11">2014-11</a> (9)</li>
                
                  <li><a href="http://haohaoxuexi.iteye.com/blog/monthblog/2014-10">2014-10</a> (10)</li>
                
                <li><a href="http://haohaoxuexi.iteye.com/blog/monthblog_more">更多存档...</a></li>
              </ul>
            </div>
            
            
              <div id="comments_top">
                <h5>评论排行榜</h5>
                <ul>
                  
                    <li><a href="http://haohaoxuexi.iteye.com/blog/2123030" title="Spring使用Cache、整合Ehcache">Spring使用Cache、整合Ehcache</a></li>
                  
                    <li><a href="http://haohaoxuexi.iteye.com/blog/2119737" title="Ehcache（08）——可阻塞的Cache——BlockingCache">Ehcache（08）——可阻塞的Cache——Bloc ...</a></li>
                  
                    <li><a href="http://haohaoxuexi.iteye.com/blog/2031335" title="使用POI读写Word doc文件">使用POI读写Word doc文件</a></li>
                  
                    <li><a href="http://haohaoxuexi.iteye.com/blog/2154299" title="Spring Security（01）——初体验">Spring Security（01）——初体验</a></li>
                  
                    <li><a href="http://haohaoxuexi.iteye.com/blog/2017099" title="Servlet3.0模块化支持">Servlet3.0模块化支持</a></li>
                  
                </ul>
              </div>
            

            <div id="guest_books">
              <h5>最新评论</h5>
              <ul>
                
                <li>
                  <a href="http://beyondlh.iteye.com/" target="_blank" title="谁说我不是会员">谁说我不是会员</a>： 
                  楼主给力 <br>
                  <a href="http://haohaoxuexi.iteye.com/blog/1770554#bc2367548">SpringMVC介绍之视图解析器ViewResolver</a>
                </li>
                
                <li>
                  <a href="http://jackyin5918.iteye.com/" target="_blank" title="jackyin5918">jackyin5918</a>： 
                  好一个简单介绍,牛逼的人总是能把复杂的东西简单化,顶 抱大腿<br>
                  <a href="http://haohaoxuexi.iteye.com/blog/1343761#bc2367361">基于注解的SpringMVC简单介绍</a>
                </li>
                
                <li>
                  <a href="http://haifengwuch.iteye.com/" target="_blank" title="haifengwuch">haifengwuch</a>： 
                  iteye的不用了吗<br>
                  <a href="http://haohaoxuexi.iteye.com/blog/2147368#bc2367248">将博客搬至CSDN</a>
                </li>
                
                <li>
                  <a href="http://418702610.iteye.com/" target="_blank" title="418702610">418702610</a>： 
                  灰常详尽，多读两遍才能看明白啊。<br>
                  <a href="http://haohaoxuexi.iteye.com/blog/1979837#bc2367232">Java Socket编程</a>
                </li>
                
                <li>
                  <a href="http://haohaoxuexi.iteye.com/" target="_blank" title="234390216">234390216</a>： 
                  lanzhiqiyue 写道
  &lt;cache:anno ...<br>
                  <a href="http://haohaoxuexi.iteye.com/blog/2123030#bc2367174">Spring使用Cache、整合Ehcache</a>
                </li>
                
              </ul>
            </div>

            <div class="local_bottom"></div>
          
        </div>
      </div>

      <div id="footer" class="clearfix">
        <div id="copyright">
          <hr>
          声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。<br>
          © 2003-2015 ITeye.com.   All rights reserved.  [ 京ICP证110151号  京公网安备110105010620 ]
        </div>
      </div>
    </div>
    <script type="text/javascript">
  document.write("<img src='http://stat.iteye.com/?url="+ encodeURIComponent(document.location.href) + "&referrer=" + encodeURIComponent(document.referrer) + "&user_id=' width='0' height='0' />");
</script><img src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/saved_resource" width="0" height="0">

<script src="./SpringMVC介绍之Validation - 好好学习，天天向上 - ITeye技术网站_files/tracking.js" type="text/javascript"></script>

    
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29372414-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
      
    
  

</body></html>